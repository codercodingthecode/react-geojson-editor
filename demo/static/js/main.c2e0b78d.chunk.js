(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(66)},28:function(e,t,n){},29:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(21),r=n.n(i),c=(n(28),n(2)),l=n(3),s=n(5),d=n(4),u=n(6),g=(n(29),n(9)),p=n(17),m=n(8),h=n(12),f=n.n(h),v=n(13),y=n(14),b=n(16),E=(n(54),n(22)),j=n.n(E);function w(e){return e.name}function x(e){return a.a.createElement("span",null,e.name)}var S=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(d.a)(t).call(this))).getSuggestions=function(t){var n=t.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(""===n)return[];var o=new RegExp("^"+n,"i");return(e.props.regions||[]).filter(function(e){return o.test(e.name)})},e.onChange=function(t,n){var o=n.newValue;n.method;e.setState({value:o})},e.onSuggestionsFetchRequested=function(t){var n=t.value;console.log("[onSuggestionsFetchRequested]",n),e.setState({suggestions:e.getSuggestions(n)})},e.onSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.onSuggestionSelected=function(t,n){var o=n.suggestion;n.suggestionValue,n.suggestionIndex,n.sectionIndex,n.method;console.log("[onSuggestionSelected]",o),e.props.onSuggestionSelected(o)},e.state={value:"",suggestions:[]},e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.suggestions,o={placeholder:this.props.placeholder,value:t,onChange:this.onChange};return a.a.createElement(j.a,{suggestions:n,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:this.onSuggestionSelected,getSuggestionValue:w,renderSuggestion:x,inputProps:o})}}]),t}(a.a.Component),C=f.a.mark(O);function O(){var e,t,n=arguments;return f.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=n.length>0&&void 0!==n[0]?n[0]:2,t=n.length>1&&void 0!==n[1]?n[1]:100;case 2:if(!(e<t)){o.next=7;break}return o.next=5,++e;case 5:o.next=2;break;case 7:case"end":return o.stop()}},C)}var k=O(),I=([[51.614090500221955,-.24650733496093835],[51.57057931201116,-.23414771582031335],[51.5893539558775,-.20256202246093835],[51.61835405978723,-.08445899511718835],[51.614090500221955,-.24650733496093835]].map(function(e){var t=Object(m.a)(e,2),n=t[0];return[t[1],n]}),[[51.614090500221955,-.24650733496093835],[51.68396230862656,-.04600684667968835],[51.684813739230265,-.22865455175781335],[51.6362566365055,-.25337379003906335],[51.614090500221955,-.24650733496093835]].map(function(e){var t=Object(m.a)(e,2),n=t[0];return[t[1],n]}),function(e){var t=e.onClick,n=e.name,o=e.description;return a.a.createElement("button",{style:{border:"none",outline:"none",width:"100%",padding:0,margin:0,opacity:.5},onClick:t},a.a.createElement("div",{style:{width:"calc(100% - 30px)",height:120,border:"1px gray solid",cursor:"pointer",padding:15}},a.a.createElement("div",{style:{width:"100%",height:"100%",padding:0,display:"flex",flexDirection:"row",justifyContent:"space-between"}},a.a.createElement("div",{style:{height:"100%",padding:0,display:"flex",flexDirection:"column",justifyContent:"space-between"}},a.a.createElement("h2",{style:{textAlign:"left"}},n),a.a.createElement("div",{style:{textAlign:"left"}},o),a.a.createElement("div",null),a.a.createElement("div",null)),a.a.createElement("div",{style:{width:25,marginLeft:5,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"}},a.a.createElement("div",null),a.a.createElement("div",null)))))}),L=function(e){e.onClick;var t=e.name,n=e.description;return a.a.createElement("div",{style:{border:"none",outline:"none",width:"100%",padding:0,margin:0}},a.a.createElement("div",{style:{width:"calc(100% - 30px)",height:120,border:"1px gray solid",padding:15}},a.a.createElement("div",{style:{width:"100%",height:"100%",padding:0,display:"flex",flexDirection:"row",justifyContent:"space-between"}},a.a.createElement("div",{style:{border:"none",outline:"none",cursor:"pointer",height:"100%",padding:0,display:"flex",flexDirection:"column",justifyContent:"space-between"}},a.a.createElement("h2",{style:{textAlign:"left"}},t),a.a.createElement("div",{style:{textAlign:"left"}},n),a.a.createElement("div",null),a.a.createElement("div",null)),a.a.createElement("div",{style:{width:25,marginLeft:5,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"}},a.a.createElement("div",null),a.a.createElement("div",null,a.a.createElement("div",{style:{border:"none",outline:"none",cursor:"pointer",paddingTop:"0.2em"}},a.a.createElement(y.a,{icon:b.a,style:{color:"#0074ff"}}))),a.a.createElement("button",{style:{border:"none",outline:"none",cursor:"pointer"},onClick:function(){}},a.a.createElement(y.a,{icon:b.b}))))))},A=function(e){var t=e.showControls,n=e.onClick,o=e.name,i=e.description;return a.a.createElement("button",{style:{border:"none",outline:"none",width:"100%",padding:0,margin:0,opacity:t?1:.5},disabled:t,onClick:n},a.a.createElement("div",{style:{width:"calc(100% - 30px)",height:120,border:"1px gray solid",cursor:"pointer",padding:15}},a.a.createElement("div",{style:{width:"100%",height:"100%",padding:0,display:"flex",flexDirection:"row",justifyContent:"space-between"}},a.a.createElement("div",{style:{height:"100%",padding:0,display:"flex",flexDirection:"column",justifyContent:"space-between"}},a.a.createElement("h2",{style:{textAlign:"left"}},o),a.a.createElement("div",{style:{textAlign:"left"}},i),a.a.createElement("div",null),a.a.createElement("div",null)))))},N=function(e){var t=e.locations,n=void 0===t?[]:t,o=e.selectedLocationId,i=e.onChangeLocation,r=e.onNewLocation,c=e.className;return a.a.createElement("div",{className:c},n.map(function(e){var t=e.id,n=e.title,r=e.description;return a.a.createElement("div",{className:"box",key:t},t===o?a.a.createElement(L,{showControls:t===o,onClick:function(){return i(t)},name:n,description:r}):a.a.createElement(I,{showControls:t===o,onClick:function(){return i(t)},name:n,description:r}))}),a.a.createElement("div",{className:"box"},a.a.createElement(A,{showControls:!o,onClick:r,name:"New Location",description:"Draw then click save button"})))},D=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={locations:[],selectedLocationId:0},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.all([{title:"Manhattan",openstreetmapId:"199324647"},{title:"Soho",openstreetmapId:"199241405"},{title:"Central Park",openstreetmapId:"250753466"},{title:"Harlem",openstreetmapId:"199412251"},{title:"Queens County",openstreetmapId:"198839459"},{title:"City of London",openstreetmapId:"198098990"},{title:"London",openstreetmapId:"197735118"}].map(function(e){var t=e.openstreetmapId;return fetch("".concat("https://nominatim.openstreetmap.org/details.php?polygon_geojson=1&format=json","&place_id=").concat(t)).then(function(e){return e.json()}).then(function(e){var t=e.place_id,n=Object(m.a)(e.centroid.coordinates,2),o=n[0],a=n[1],i=e.geometry.coordinates,r=e.names.name;return{id:t,center:{lng:o,lat:a},title:r,name:r,description:"",geojson:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"MultiPolygon",coordinates:[i]}}]}}})})).then(function(t){e.setState(function(){return{locations:t}})})}},{key:"render",value:function(){var e=this,t=this.state.locations.find(function(t){return t.id===e.state.selectedLocationId});return a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"row top-xs"},a.a.createElement(N,{className:"col-xs-12 col-sm-12 col-md-4 col-lg-4",locations:this.state.locations,selectedLocationId:this.state.selectedLocationId,onChangeLocation:function(t){e.setState({selectedLocationId:t})},onNewLocation:function(){e.setState({selectedLocationId:0})}}),a.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-8 col-lg-8"},a.a.createElement("div",{className:"box",style:{height:800}},a.a.createElement("div",{className:"App-flex",style:{border:"1px solid grey",padding:"1em"}},a.a.createElement(S,{placeholder:"Search ...",regions:this.state.locations,onSuggestionSelected:function(t){var n=Object(m.a)(t.geojson.features,1)[0];e.setState(function(e){var t=e.locations.find(function(t){return t.id===e.selectedLocationId});return{locations:e.locations.map(function(e){if(e===t){var o=[].concat(Object(p.a)(t.geojson.features),[n]);return Object(g.a)({},t,{geojson:Object(g.a)({},t.geojson,{features:o})})}return e})}})}})),a.a.createElement("div",{className:"App-flex",style:{border:"1px solid grey"}},a.a.createElement(R,{initialGeojson:t?t.geojson:null},function(n,o){n.geojson,n.center,o.onSaveGeojson;return console.log(t&&t.geojson),a.a.createElement("div",{style:{width:"100%",height:700}},a.a.createElement(v.GeoJsonEditor,{googleMapKey:"AIzaSyD_HADQAEoHkZhBhqh-oDaiLHuRyHbyP9c",initialMode:"VIEW",existingPolygons:t?t.geojson:void 0,center:t?t.center:void 0,zoom:11,mapHeight:700,onSave:function(t,n){console.log("geojson area",t,n);var o="Region with an area of ".concat(n," square meters");e.setState(function(e){if(e.selectedLocationId)return{locations:e.locations.map(function(n){return n.id===e.selectedLocationId?Object(g.a)({},n,{geojson:t,description:o}):n})};var n=k.next().value;return{selectedLocationId:n,locations:[].concat(Object(p.a)(e.locations),[{id:n,title:"Location ".concat(n),description:o,geojson:t}])}})}}))}))))))}}]),t}(o.Component),R=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={geojson:n.props.initialGeojson,center:{lat:51.528308,lng:-.3817765}},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({center:{lng:-73.9598295,lat:40.7900869}})},5e3)}},{key:"onSaveGeojson",value:function(e){this.setState({geojson:e})}},{key:"render",value:function(){var e={onSaveGeojson:this.onSaveGeojson.bind(this)};return console.log(this.state),this.props.children(this.state,e)}}]),t}(o.Component),q=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(D,null))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.c2e0b78d.chunk.js.map